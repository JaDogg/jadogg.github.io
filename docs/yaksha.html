<!doctypehtml><html lang="en"><meta charset="utf-8"><title>JaDogg&#x27;s Website</title><meta name="description"content="JaDogg&#x27;s Website"><meta name="viewport"content="width=device-width,initial-scale=1"><link rel="preconnect"href="https://fonts.googleapis.com"><link rel="preconnect"href="https://fonts.gstatic.com"crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@200&display=swap"rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@500&display=swap"rel="stylesheet"><style>*{margin:0;padding:0;font-family:'Roboto Mono',monospace}.toc-item{display:block;width:calc(100% - 10px);overflow:hidden;margin-bottom:3px}a:link{color:#a6fff8}a:visited{color:#8dedab}a:hover{color:#ead595}ul{margin-left:20px}ul>li{margin-left:10px}h1,h2,h3,h4,h5,h6{font-family:Ubuntu,sans-serif}h1{margin-top:15px}h1,h2{margin-bottom:10px}body,html{background-color:#323232;color:#aaa;font-size:1.5em;line-height:1.35em;width:100%}.table-of-contents{font-size:.7em;line-height:1.1em;width:20%;overflow-y:auto;display:inline-block;position:-webkit-sticky;position:sticky;top:20px}.container{width:100%;display:inline-block}.boxes{width:80%;float:right;display:inline-block}.box{display:inline-block;width:calc(100% - 4px);padding:2px;overflow-wrap:anywhere}.content{width:70%;display:inline-block;float:left;overflow:wrap;overflow-wrap:anywhere}.note{display:inline-block;width:calc(30% - 5px);padding-left:5px;float:right;font-size:.7em}.box::after{content:"";clear:both;display:table}code{border:1px dashed gray;background-color:#000;padding-left:1px;padding-right:1px}.highlight{border:1px dashed gray;background-color:#000}pre{font-size:.6em;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}hr{border:none;border-top:1px dashed gray;margin-bottom:15px}.center-text{text-align:center}.red-status{display:inline-block;border-radius:50px;background:#ff7d7d;color:#000;padding:0 20px;font-size:.8em}.green-status{display:inline-block;border-radius:50px;background:#77c01b;color:#000;padding:0 20px;font-size:.8em}.yellow-status{display:inline-block;border-radius:50px;background:#c0a600;color:#000;padding:0 20px;font-size:.8em}@media (max-width:800px){body,html{font-size:1em;line-height:1.2em}.note{width:100%}.content{width:100%}.boxes{width:100%}.table-of-contents{width:100%;position:sticky;top:0;background:#323232}}pre{line-height:125%}td.linenos .normal{color:#f1fa8c;background-color:#44475a;padding-left:5px;padding-right:5px}span.linenos{color:#f1fa8c;background-color:#44475a;padding-left:5px;padding-right:5px}td.linenos .special{color:#50fa7b;background-color:#6272a4;padding-left:5px;padding-right:5px}span.linenos.special{color:#50fa7b;background-color:#6272a4;padding-left:5px;padding-right:5px}.highlight .hll{background-color:#44475a}.highlight{background:#282a36;color:#f8f8f2}.highlight .c{color:#6272a4}.highlight .err{color:#f8f8f2}.highlight .g{color:#f8f8f2}.highlight .k{color:#ff79c6}.highlight .l{color:#f8f8f2}.highlight .n{color:#f8f8f2}.highlight .o{color:#ff79c6}.highlight .x{color:#f8f8f2}.highlight .p{color:#f8f8f2}.highlight .ch{color:#6272a4}.highlight .cm{color:#6272a4}.highlight .cp{color:#ff79c6}.highlight .cpf{color:#6272a4}.highlight .c1{color:#6272a4}.highlight .cs{color:#6272a4}.highlight .gd{color:#8b080b}.highlight .ge{color:#f8f8f2;text-decoration:underline}.highlight .gr{color:#f8f8f2}.highlight .gh{color:#f8f8f2;font-weight:700}.highlight .gi{color:#f8f8f2;font-weight:700}.highlight .go{color:#44475a}.highlight .gp{color:#f8f8f2}.highlight .gs{color:#f8f8f2}.highlight .gu{color:#f8f8f2;font-weight:700}.highlight .gt{color:#f8f8f2}.highlight .kc{color:#ff79c6}.highlight .kd{color:#8be9fd;font-style:italic}.highlight .kn{color:#ff79c6}.highlight .kp{color:#ff79c6}.highlight .kr{color:#ff79c6}.highlight .kt{color:#8be9fd}.highlight .ld{color:#f8f8f2}.highlight .m{color:#ffb86c}.highlight .s{color:#bd93f9}.highlight .na{color:#50fa7b}.highlight .nb{color:#8be9fd;font-style:italic}.highlight .nc{color:#50fa7b}.highlight .no{color:#f8f8f2}.highlight .nd{color:#f8f8f2}.highlight .ni{color:#f8f8f2}.highlight .ne{color:#f8f8f2}.highlight .nf{color:#50fa7b}.highlight .nl{color:#8be9fd;font-style:italic}.highlight .nn{color:#f8f8f2}.highlight .nx{color:#f8f8f2}.highlight .py{color:#f8f8f2}.highlight .nt{color:#ff79c6}.highlight .nv{color:#8be9fd;font-style:italic}.highlight .ow{color:#ff79c6}.highlight .w{color:#f8f8f2}.highlight .mb{color:#ffb86c}.highlight .mf{color:#ffb86c}.highlight .mh{color:#ffb86c}.highlight .mi{color:#ffb86c}.highlight .mo{color:#ffb86c}.highlight .sa{color:#bd93f9}.highlight .sb{color:#bd93f9}.highlight .sc{color:#bd93f9}.highlight .dl{color:#bd93f9}.highlight .sd{color:#bd93f9}.highlight .s2{color:#bd93f9}.highlight .se{color:#bd93f9}.highlight .sh{color:#bd93f9}.highlight .si{color:#bd93f9}.highlight .sx{color:#bd93f9}.highlight .sr{color:#bd93f9}.highlight .s1{color:#bd93f9}.highlight .ss{color:#bd93f9}.highlight .bp{color:#f8f8f2;font-style:italic}.highlight .fm{color:#50fa7b}.highlight .vc{color:#8be9fd;font-style:italic}.highlight .vg{color:#8be9fd;font-style:italic}.highlight .vi{color:#8be9fd;font-style:italic}.highlight .vm{color:#8be9fd;font-style:italic}.highlight .il{color:#ffb86c}</style><div class="container"><h1 class="center-text">JaDogg&#x27;s Website</h1><div class="table-of-contents"><div class="toc-item"><a href="#introduction">[1] Introduction</a></div><div class="toc-item"><a href="#philosophy">[1.1] Philosophy</a></div><div class="toc-item"><a href="#sample">[1.2] Sample</a></div><div class="toc-item"><a href="#input-code">[1.2.1] Input code</a></div><div class="toc-item"><a href="#output-c-code">[1.2.2] Output C code</a></div><div class="toc-item"><a href="#yaksha-runtime-library">[2] Yaksha runtime library</a></div><div class="toc-item"><a href="#how-does-the-yaksha-lang-library-get-packaged">[2.1] How does the Yaksha-lang library get packaged?</a></div><div class="toc-item"><a href="#packer-components">[2.1.1] Packer components</a></div><div class="toc-item"><a href="#third-party-libraries">[2.1.2] Third Party Libraries</a></div><div class="toc-item"><a href="#packer-dsl">[2.1.3] Packer DSL</a></div><div class="toc-item"><a href="#language-features">[3] Language Features</a></div><div class="toc-item"><a href="#data-types">[3.1] Data Types</a></div><div class="toc-item"><a href="#strings">[3.1.1] Strings</a></div><div class="toc-item"><a href="#string-view">[3.1.2] String View</a></div><div class="toc-item"><a href="#standard-integers">[3.1.3] Standard integers</a></div><div class="toc-item"><a href="#integer-types">[3.1.4] Integer types</a></div><div class="toc-item"><a href="#float-types">[3.1.5] Float types</a></div><div class="toc-item"><a href="#syntax-features">[3.2] Syntax features</a></div><div class="toc-item"><a href="#let-statement">[3.2.1] Let statement</a></div><div class="toc-item"><a href="#print-statement">[3.2.2] Print statement</a></div><div class="toc-item"><a href="#functions">[3.2.3] Functions</a></div><div class="toc-item"><a href="#basic-functions">[3.2.3.1] Basic functions</a></div><div class="toc-item"><a href="#native-declaration-of-a-function">[3.2.3.2] Native declaration of a function</a></div><div class="toc-item"><a href="#defer-statement">[3.2.4] Defer statement</a></div><div class="toc-item"><a href="#del-statement">[3.2.5] Del statement</a></div><div class="toc-item"><a href="#struct-class-statement">[3.2.6] Struct/Class statement</a></div><div class="toc-item"><a href="#import-statement">[3.2.7] Import statement</a></div><div class="toc-item"><a href="#builtin-functions">[3.3] Builtin Functions</a></div></div><div class="boxes"><hr><div class="box"><div class="content"><div class="banner-image"><img alt="Yaksha Programming Language"src="images/yk-banner.png"style="max-width:100%"></div></div><div class="note"></div></div><div class="box"><div class="content"><h2 id="introduction">[1] Introduction</h2></div><div class="note"></div></div><div class="box"><div class="content"><p>Yaksha â€“ A manual memory managed, compiled to C99, programming language with python like syntax.</div><div class="note"><p>Please note this is an in progress project. Very early days.</div></div><div class="box"><div class="content"><h3 id="philosophy">[1.1] Philosophy</h3></div><div class="note"></div></div><div class="box"><div class="content"><p>I am not trying to build zig, rust, or C++. So, syntax will be simple, minimal and there will be some manual memory management involved. There will be first class support for Windows. One goal is to have simple access to GPU/parallel programming (this is not even started).</div><div class="note"><p>This is a single person project, so any advice, pull-requests/issues, fixes to documentation grammar errors, fixes to spelling errors, well wishes, constructive criticism and/or any other kind of help is welcome.</div></div><div class="box"><div class="content"><h3 id="sample">[1.2] Sample</h3></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="input-code">[1.2.1] Input code</h4></div><div class="note"></div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;b&quot;</span>
    <span class="k">while</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span> <span class="o">+</span> <span class="n">b</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div></div><div class="note"><p>This simple program demonstrate calculating factorial inefficiently using recursion and adding a prefix to a string.<p><code>print</code> is a statement. It takes one expression and does not include a newline.</div></div><div class="box"><div class="content"><h4 id="output-c-code">[1.2.2] Output C code</h4></div><div class="note"></div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="c1">// --yaksha header section--</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;yk__lib.h&quot;</span><span class="cp"></span>
<span class="kt">int32_t</span><span class="w"> </span><span class="nf">yy__factorial</span><span class="p">(</span><span class="kt">int32_t</span><span class="p">);</span><span class="w"></span>
<span class="kt">int32_t</span><span class="w"> </span><span class="nf">yy__main</span><span class="p">();</span><span class="w"></span>
<span class="c1">// --yaksha body section--</span>
<span class="kt">int32_t</span><span class="w"> </span><span class="nf">yy__factorial</span><span class="p">(</span><span class="kt">int32_t</span><span class="w"> </span><span class="n">yy__x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">yy__x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">yy__x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">yy__factorial</span><span class="p">((</span><span class="n">yy__x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="kt">int32_t</span><span class="w"> </span><span class="nf">yy__main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int32_t</span><span class="w"> </span><span class="n">yy__a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">t__0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsnew</span><span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">yy__b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsdup</span><span class="p">(</span><span class="n">t__0</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">((</span><span class="n">yy__a</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">yy__factorial</span><span class="p">(</span><span class="n">yy__a</span><span class="p">)));</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">t__1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsnew</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">t__1</span><span class="p">));</span><span class="w"></span>
<span class="w">      </span><span class="n">yy__a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">yy__a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">t__2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsnew</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">t__3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdscatsds</span><span class="p">(</span><span class="n">yk__sdsdup</span><span class="p">(</span><span class="n">t__2</span><span class="p">),</span><span class="w"> </span><span class="n">yy__b</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">yy__b</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yy__b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsdup</span><span class="p">(</span><span class="n">t__3</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">t__3</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">t__2</span><span class="p">);</span><span class="w"></span>
<span class="w">      </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">t__1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">yy__b</span><span class="p">));</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sds</span><span class="w"> </span><span class="n">t__4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yk__sdsnew</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">t__4</span><span class="p">));</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">t__4</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">t__0</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">yk__sdsfree</span><span class="p">(</span><span class="n">yy__b</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// --yaksha footer section--</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">yy__main</span><span class="p">();</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</pre></div></div><div class="note"><p>Notice <code>yk__sdsfree</code> is automatically generated for simple string uses. This makes strings immutable. Currently, it is doing a lot of unnecessary processing. ðŸ˜“</div></div><div class="box"><div class="content"><hr><h2 id="yaksha-runtime-library">[2] Yaksha runtime library</h2></div><div class="note"><hr></div></div><div class="box"><div class="content"><p>Runtime library uses multiple 3rd party libraries, set of python scripts and few other nuts and bolts to create runtime library sources.</div><div class="note"></div></div><div class="box"><div class="content"><p>All exposed functionality starts with <code>yk__</code> or <code>YK__</code>. Yaksha programming language preserves anything that starts with <code>yk__</code> or <code>YK__</code> while prefixing any other name with <code>yy__</code>.</div><div class="note"><p>This avoids collisions with C standard library functions or keywords.</div></div><div class="box"><div class="content"><h3 id="how-does-the-yaksha-lang-library-get-packaged">[2.1] How does the Yaksha-lang library get packaged?</h3></div><div class="note"></div></div><div class="box"><div class="content"><div class="banner-image"><img alt="Yaksha Programming Language Runtime"src="images/yk-rt.png"style="max-width:100%"></div></div><div class="note"><p>Multiple sources are packaged into a single header file.<p>Library functionality is exposed by prefixing with <code>yk__</code> or <code>YK__</code>.</div></div><div class="box"><div class="content"><h4 id="packer-components">[2.1.1] Packer components</h4></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p><code>packer.py</code> - Run packer DSL scripts and create packaged single header libraries.<li><p><code>inctree.py</code> - Topological sort <code>#include</code> DAG to determine best order for combining headers.</ul><ul><li><p><code>cids.exe</code> - Use <code>stb_c_lexer.h</code> library to parse C code and extract identifiers.<li><p><code>single_header_packer.py</code> - ApoorvaJ&#x27;s single header C code packager. <a href="https://github.com/ApoorvaJ/libs/blob/master/scripts/single_header_packer.py">Repo</a><li><p><code>python-patch</code> - techtonik&#x27;s patch script. <a href="https://github.com:techtonik/python-patch">Repo</a><li><p><code>fcpp</code>- Frexx C Preprocessor by Daniel Stenberg. (Patch for Windows compilation was needed, failed to compile with MSVC, works with MingW with patch).</ul></div><div class="note"><p>DAG - Directed Acyclic Graph.</div></div><div class="box"><div class="content"><h4 id="third-party-libraries">[2.1.2] Third Party Libraries</h4></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p><code>sds</code> - Salvatore Sanfilippo&#x27;s string library. (Needed a patch to support MSVC 2019)<li><p><code>stb</code> - Single header libraries by Sean Barrett.<li><p><code>sokol</code> - Useful single header libraries by Andre Weissflog.<li><p><code>nuklear</code> - Single header immediate mode UI library by Micha Mettke.<li><p><code>libs</code> - Mattias Gustavsson&#x27;s single header C libraries.<li><p><code>utf8proc</code> - UTF-8 library - Jan Behrens, Public Software Group and Julia developers.</ul></div><div class="note"><p>If you stack few giants, you can stand very tall on top of them.</p><br><p>Note - currently only sds and stb_ds is used. This selection of libraries may change.</div></div><div class="box"><div class="content"><h4 id="packer-dsl">[2.1.3] Packer DSL</h4></div><div class="note"></div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">use_source</span><span class="p">(</span><span class="s2">&quot;libs&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">lib</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ini&quot;</span><span class="p">,</span> <span class="s2">&quot;thread&quot;</span><span class="p">,</span> <span class="s2">&quot;http&quot;</span><span class="p">]:</span>
    <span class="n">ids</span> <span class="o">=</span> <span class="n">extract_ids</span><span class="p">(</span><span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">)</span>
    <span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ids</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">lib</span><span class="p">)]</span>
    <span class="n">PU</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ids</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">lib</span><span class="o">.</span><span class="n">upper</span><span class="p">())]</span>
    <span class="n">prefix</span><span class="p">(</span><span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="n">PREFIX</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
    <span class="n">prefix</span><span class="p">(</span><span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="n">PREFIX_U</span><span class="p">,</span> <span class="n">PU</span><span class="p">)</span>
    <span class="n">rename</span><span class="p">(</span><span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="p">[[</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;yk__http://&#39;</span><span class="p">),</span> <span class="s1">&#39;http://&#39;</span><span class="p">],</span>
                        <span class="p">[</span><span class="s2">&quot;YK__THREAD_PRIORITY_HIGHEST&quot;</span><span class="p">,</span> <span class="s2">&quot;THREAD_PRIORITY_HIGHEST&quot;</span><span class="p">]])</span>
    <span class="n">copy_file</span><span class="p">(</span><span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="n">PREFIX</span> <span class="o">+</span> <span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="n">is_temp</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">clang_format</span><span class="p">(</span><span class="n">PREFIX</span> <span class="o">+</span> <span class="n">lib</span> <span class="o">+</span> <span class="s2">&quot;.h&quot;</span><span class="p">,</span> <span class="n">is_temp</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div></div><div class="note"><p>It is just Python 3.x with extra functions added and evaluated.ðŸ¤«</div></div><div class="box"><div class="content"><hr><h2 id="language-features">[3] Language Features</h2></div><div class="note"><hr></div></div><div class="box"><div class="content"><h3 id="data-types">[3.1] Data Types</h3></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="strings">[3.1.1] Strings</h4><p><span class="yellow-status">in progress</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>String allocations and de-allocations are abstracted away, so strings are immutable and automatically freed.<li><p>Strings are also duplicated everytime you create a new variable or pass it to a function.<li><p>This makes the design philosophy of strings different from that of languages like <code>zig</code> for example, where you have more control over allocations.<li><p>It is not meant to be fast. It is meant to be productively usable.<li><p>At C code level <code>yk__sds</code> data structure will be used. (<code>yk__sds</code> is a <code>char*</code> with special header placed just before).</ul></div><div class="note"><p>Data Type - <code>str</code><p>Internally this is a binary string.<p><code>sds</code> library (part of runtime lib) takes care of the heavy lifting.</div></div><div class="box"><div class="content"><h4 id="string-view">[3.1.2] String View</h4><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Idea of string view is to avoid duplicating strings.<li><p>Read only.<li><p>Let there be dragons, if referred string goes out of scope this will point to invalid memory.<li><p>If you assign a new value to the string, then string view is invalid as original string is freed. In this case <code>strvw</code> will refer to invalid memory.</ul></div><div class="note"><p>Data Type - <code>strvw</code></div></div><div class="box"><div class="content"><h4 id="standard-integers">[3.1.3] Standard integers</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="green-status">done</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Default integer is a 32bit signed integer.<li><p>This is compiled to <code>int32_t</code> on all platforms.</ul></div><div class="note"><p>Data Type - <code>int</code> or <code>i32</code></div></div><div class="box"><div class="content"><h4 id="integer-types">[3.1.4] Integer types</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Signed types - <code>i8</code>, <code>i16</code>, <code>i32</code>, <code>i64</code><li><p>Unsigned types - <code>u8</code>, <code>u16</code>, <code>u32</code>, <code>u64</code></ul></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="float-types">[3.1.5] Float types</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p><code>f32</code> or <code>float</code> - single precision floats.</ul><ul><li><p><code>f64</code> - double precision floats.</ul></div><div class="note"><p>Same as <code>float</code> in <code>C</code></div></div><div class="box"><div class="content"><h3 id="syntax-features">[3.2] Syntax features</h3></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="let-statement">[3.2.1] Let statement</h4><p><span class="yellow-status">in progress</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Create a new variable.<li><p>If you want to assign to a variable, it needs to be created.<li><p>If no value is provided default value for data type is used.</ul></div><div class="note"><p>Default value for <code>str</code> is an empty string.</div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="print-statement">[3.2.2] Print statement</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="yellow-status">in progress</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>This is a statement and not an expression (function call).</ul><ul><li><p>Does not support more than one parameter.<li><p>Does not suffix a new line character at the end.<li><p>Only builtin data types can be printed.</ul></div><div class="note"><p>This may change to a builtin function in the future.</div></div><div class="box"><div class="content"><h4 id="functions">[3.2.3] Functions</h4></div><div class="note"></div></div><div class="box"><div class="content"><h5 id="basic-functions">[3.2.3.1] Basic functions</h5></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="yellow-status">in progress</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Has a return type.</ul></div><div class="note"></div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div></div><div class="note"></div></div><div class="box"><div class="content"><h5 id="native-declaration-of-a-function">[3.2.3.2] Native declaration of a function</h5></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>A function without an implementation.<li><p>Useful to expose C library code.</ul><div class="highlight"><pre><span></span><span class="k">@native</span>
<span class="k">def</span> <span class="nf">getarg</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="defer-statement">[3.2.4] Defer statement</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="green-status">done</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Defer something to happen at the end of the scope.<li><p>Before any <code>return</code> from a function.<li><p>Before <code>break</code>, <code>continue</code> or end of <code>while</code> loop body.<ul><li><p>This behaviour is different from what you see in go-lang.</ul><li><p>Before end of <code>if</code> body or end of <code>else</code> body.</ul></div><div class="note"><p><code>defer</code> works as a stack.<p>That means deferred expressions are executed in last deferred first executed order.</div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">onexit</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="nb">println</span><span class="p">(</span><span class="s2">&quot;All done&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">defer</span><span class="p">(</span><span class="n">onexit</span><span class="p">())</span>
    <span class="nb">println</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div></div><div class="note"></div></div><div class="box"><div class="content"><p>Output:<div class="highlight"><pre><span></span>Hello World
All done
</pre></div></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="del-statement">[3.2.5] Del statement</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Delete values.<li><p>Delete arrays, and other builtin data structures without deleting content.</ul></div><div class="note"></div></div><div class="box"><div class="content"><h4 id="struct-class-statement">[3.2.6] Struct/Class statement</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Create a custom data structure.</ul></div><div class="note"></div></div><div class="box"><div class="content"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">student</span><span class="p">:</span>
    <span class="n">student_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span>

<span class="k">struct</span> <span class="nc">teacher</span><span class="p">:</span>
    <span class="n">teacher_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">address</span><span class="p">:</span> <span class="nb">str</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Size of student structure is &quot;</span><span class="p">)</span>
    <span class="nb">println</span><span class="p">(</span><span class="nb">sizeof</span><span class="p">(</span><span class="n">student</span><span class="p">))</span>
    <span class="k">return</span> <span class="mi">0</span>
</pre></div></div><div class="note"><p><code>struct</code> and <code>class</code> keywords do the same thing.<p>Not finalized. I may just go with <code>struct</code> or <code>class</code>.</div></div><div class="box"><div class="content"><h4 id="import-statement">[3.2.7] Import statement</h4></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p>Import a file.</ul></div><div class="note"><p>Name mangling takes place for this.</div></div><div class="box"><div class="content"><h3 id="builtin-functions">[3.3] Builtin Functions</h3></div><div class="note"></div></div><div class="box"><div class="content"><p><span class="red-status">not started</span></div><div class="note"></div></div><div class="box"><div class="content"><ul><li><p><code>print</code> - A <code>print</code> function will be introduced instead of <code>print</code> statement.<li><p><code>println</code> - A <code>print</code> function that suffix a new line character.<li><p><code>len</code> - Get length of strings and other data structures provided by the language.<li><p><code>sizeof</code> - Size of structures or C data types.<li><p><code>iterutf8</code> - Enumerate utf8 code points of a <code>str</code> or <code>strvw</code><li><p><code>readfile</code> - Read a whole file and return a <code>str</code>. Empty string is returned if file cannot be read for some reason. This is a convenient function that pretends world is nice and fluffy.<li><p><code>writefile</code> - Save a <code>str</code> to a file. <code>bool</code> is returned to show success or failure for any reason to write the file.<li><p><code>slice</code> - Create a string view from a string with given start and end positions.<li><p><code>tostr</code> - Converts <code>strvw</code> or <code>int</code> types to string (base 10). If input is a <code>str</code> it is duplicated. <code>float</code> types will be formatted with 2 decimal places.<li><p><code>ftostr</code> - Converts a <code>float</code> to <code>str</code> with given decimal points.<li><p><code>itostr</code> - Converts an <code>int</code> to <code>str</code> with given base up to 16.</ul></div><div class="note"><p>Built in functions may call different implementations in <code>C</code> based on input.</div></div></div></div>